<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Car Price Predictor</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css">
    <style>
        /* Smooth scroll for anchor links */
        html {
            scroll-behavior: smooth;
        }

        /* Keyframes for fade-in animation */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Animation class */
        .fade-in {
            opacity: 0;
            animation: fadeIn 1s forwards;
        }

        /* Jumbotron header styles */
        header.jumbotron {
            background-color: #007bff;
            color: white;
        }

        /* Card header styles */
        .card-header {
            background-color: #007bff;
            color: white;
        }

        /* Form control margin */
        .form-group {
            margin-bottom: 1.5rem;
        }

        /* Button styles */
        .btn-primary {
            background-color: #007bff;
            border-color: #007bff;
            transition: background-color 0.3s, border-color 0.3s;
        }

        .btn-primary:hover {
            background-color: #0056b3;
            border-color: #004085;
        }

        /* Icon styles */
        .fa-3x {
            font-size: 3em;
        }

        /* Footer styles */
        footer {
            background-color: #343a40;
            color: white;
            padding: 1.5rem 0;
        }

        /* Section animations */
        section {
            opacity: 0;
            animation: fadeIn 1s forwards;
        }
    </style>
</head>
<body>

<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="home.html">Car Price</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ml-auto">
            <li class="nav-item active">
                <a class="nav-link" href="home.html">Home <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="index4.html">Predict Price</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="about.html">about</a>
            </li>
        </ul>
    </div>
    <br>
    <br>
</nav>

<!-- Header -->

<!-- Introduction Section -->
<section class="py-5 fade-in">
    <div class="container text-center">
        <h2 class="mb-4">How Our Car Price Predictor Works</h2>
        <p>Our car price predictor uses advanced algorithms and data analysis to provide you with an accurate estimate of your car's value. By inputting details such as make, model, year, fuel type, and purchase year, you can quickly receive an estimate based on current market trends and historical data.</p>
       <br>
        <a href="#predict-form" class="btn btn-primary">Predict the Price</a>
    </div>
</section>

<!-- How It Works -->
<section class="bg-light py-5 fade-in">
    <div class="container">
        <h2 class="text-center mb-4">How It Works</h2>
        <div class="row">
            <div class="col-md-4 text-center">
                <i class="fas fa-info-circle fa-3x mb-3"></i>
                <h3>Step 1: Enter Car Details</h3>
                <p>Provide the make, model, year, fuel type, and mileage of your car.</p>
            </div>
            <div class="col-md-4 text-center">
                <i class="fas fa-cogs fa-3x mb-3"></i>
                <h3>Step 2: Process Data</h3>
                <p>Our algorithm processes the information using historical data and market trends.</p>
            </div>
            <div class="col-md-4 text-center">
                <i class="fas fa-chart-line fa-3x mb-3"></i>
                <h3>Step 3: Receive Estimate</h3>
                <p>Get an estimated value of your car based on the latest data.</p>
            </div>
        </div>
    </div>
</section>
<br>
<br>
<!-- Main Content -->
<div class="container fade-in" id="predict-form">
    <div class="row">
        <div class="col-md-8 offset-md-2">
            <div class="card">
                <div class="card-header text-center">
                    <h2>Predict Your Car's Price</h2>
                </div>
                <br>
                <div class="card-body">
                    <form method="post" accept-charset="utf-8" name="Modelform">
                        <div class="form-group">
                            <label for="company"><b>Select the company:</b></label>
                            <select class="selectpicker form-control" id="company" name="company" required onchange="load_car_models(this.id,'car_models')">
                                {% for company in companies %}
                                    <option value="{{ company }}">{{ company }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="car_models"><b>Select the model:</b></label>
                            <select class="selectpicker form-control" id="car_models" name="car_models" required>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="year"><b>Select Year of Purchase:</b></label>
                            <select class="selectpicker form-control" id="year" name="year" required>
                                {% for year in years %}
                                  <option value="{{ year }}">{{ year }}</option>
                                 {% endfor %}
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="fuel_type"><b>Select the Fuel Type:</b></label>
                            <select class="selectpicker form-control" id="fuel_type" name="fuel_type" required>
                                {% for fuel_type in fuel_type %}
                                  <option value="{{ fuel_type }}">{{ fuel_type }}</option>
                                 {% endfor %}
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="kilo_driven"><b>Enter the Number of Kilometres that the car has travelled:</b></label>
                            <input type="text" class="form-control" id="kilo_driven" name="kilo_driven" placeholder="Enter the kilometres driven">
                        </div>

                        <div class="form-group text-center">
                            <button type="button" class="btn btn-primary" onclick="send_data()">Predict Price</button>
                        </div>
                    </form>

                    <div class="row mt-4">
                        <div class="col-12 text-center">
                            <h4><span id="prediction"></span></h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<br><br>
<!-- Features Section -->


<!-- Footer -->
<footer class="bg-dark text-white py-4 fade-in">
    <div class="container text-center">
        <p>&copy; 2024 Car Price. All rights reserved.</p>
    </div>
</footer>

<script>
    function load_car_models(company_id, car_model_id) {
        var company = document.getElementById(company_id);
        var car_model = document.getElementById(car_model_id);
        console.log(company.value);
        car_model.value = "";
        car_model.innerHTML = "";
        {% for company in companies %}
            if (company.value == "{{ company }}") {
                {% for model in car_models %}
                    {% if company in model %}
                        var newOption = document.createElement("option");
                        newOption.value = "{{ model }}";
                        newOption.innerHTML = "{{ model }}";
                        car_model.options.add(newOption);
                    {% endif %}
                {% endfor %}
            }
        {% endfor %}
    }

    function form_handler(event) {
        event.preventDefault();
    }

    function send_data() {
        document.querySelector('form').addEventListener("submit", form_handler);

        var fd = new FormData(document.querySelector('form'));

        var xhr = new XMLHttpRequest({ mozSystem: true });

        xhr.open('POST', '/predict', true);
        document.getElementById('prediction').innerHTML = "Wait! Predicting Price.....";
        xhr.onreadystatechange = function () {
            if (xhr.readyState == XMLHttpRequest.DONE) {
                document.getElementById('prediction').innerHTML = "Prediction: â‚¹" + xhr.responseText;
            }
        }

        xhr.onload = function () { };

        xhr.send(fd);
    }

    // Adding scroll animation
    const sections = document.querySelectorAll('section');
    const options = {
        threshold: 0.1
    };

    const observer = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (!entry.isIntersecting) return;
            entry.target.classList.add('fade-in');
            observer.unobserve(entry.target);
        });
    }, options);

    sections.forEach(section => {
        observer.observe(section);
    });
</script>

<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
</body>
</html>
